<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GraphEDU - Immersive Login</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: "class",
      };
    </script>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Three.js for 3D Rendering -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <style>
      body {
        font-family: "Roboto", sans-serif;
        margin: 0;
        padding: 0;
        overflow: hidden;
        /* Background handled by Tailwind classes */
        transition: background-color 0.3s ease, color 0.3s ease;
      }

      /* Canvas covers everything */
      #canvas-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
      }

      /* UI Container with Perspective for 3D Tilt */
      .ui-container {
        position: relative;
        z-index: 10;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        perspective: 1000px;
      }

      /* The Glass Card - Light Mode Edition */
      .glass-card {
        background: rgba(255, 255, 255, 0.65);
        backdrop-filter: blur(16px);
        -webkit-backdrop-filter: blur(16px);
        border: 1px solid rgba(255, 255, 255, 0.8);
        box-shadow: 0 20px 40px -10px rgba(30, 41, 59, 0.15);
        transform-style: preserve-3d;
        transition: transform 0.1s ease-out, background-color 0.3s,
          border-color 0.3s, box-shadow 0.3s;
      }

      /* Dark Mode Glass Card */
      .dark .glass-card {
        background: rgba(15, 23, 42, 0.6); /* Slate-900 transparent */
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.5);
      }

      /* Input Styles designed for Light/Glass theme */
      .input-group {
        position: relative;
        margin-bottom: 1.5rem;
        transform-style: preserve-3d;
      }

      .input-field {
        width: 100%;
        padding: 14px 16px;
        border: 1px solid #cbd5e1; /* Slate-300 */
        border-radius: 12px;
        font-size: 16px;
        color: #1e293b;
        outline: none;
        background: rgba(255, 255, 255, 0.6);
        transition: all 0.3s;
      }

      .dark .input-field {
        background: rgba(15, 23, 42, 0.6);
        border-color: #334155; /* Slate-700 */
        color: #f1f5f9; /* Slate-100 */
      }

      .input-field:focus {
        border-color: #3b82f6; /* Blue-500 */
        background: rgba(255, 255, 255, 0.9);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.15);
      }
      .dark .input-field:focus {
        background: rgba(30, 41, 59, 0.8);
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25);
      }

      .input-label {
        position: absolute;
        left: 14px;
        top: 14px;
        padding: 0 4px;
        color: #64748b; /* Slate-500 */
        font-size: 16px;
        transition: all 0.2s;
        pointer-events: none;
        background-color: transparent;
      }
      .dark .input-label {
        color: #94a3b8; /* Slate-400 */
      }

      .input-field:focus ~ .input-label,
      .input-field:not(:placeholder-shown) ~ .input-label {
        transform: translateY(-26px) scale(0.85);
        color: #2563eb; /* Blue-600 */
        margin-left: -4px;
        font-weight: 500;
        background-color: transparent;
      }
      .dark .input-field:focus ~ .input-label,
      .dark .input-field:not(:placeholder-shown) ~ .input-label {
        color: #60a5fa; /* Blue-400 */
      }

      /* Logo Font */
      .logo-font {
        font-family: "Product Sans", "Roboto", sans-serif;
      }

      /* Theme Toggle Button */
      .theme-btn {
        background: transparent;
        border: 1px solid #cbd5e1;
        color: #64748b;
        padding: 0.4rem 0.8rem;
        border-radius: 20px;
        cursor: pointer;
        font-size: 0.85rem;
        display: flex;
        align-items: center;
        transition: all 0.3s;
      }
      .theme-btn:hover {
        background: #e2e8f0;
        color: #1e293b;
      }
      .dark .theme-btn {
        border-color: #475569;
        color: #94a3b8;
      }
      .dark .theme-btn:hover {
        background: #334155;
        color: #fff;
      }

      ::-webkit-scrollbar {
        width: 8px;
      }
      ::-webkit-scrollbar-track {
        background: #f1f5f9;
      }
      .dark ::-webkit-scrollbar-track {
        background: #0f172a;
      }
      ::-webkit-scrollbar-thumb {
        background: #cbd5e1;
        border-radius: 4px;
      }
      .dark ::-webkit-scrollbar-thumb {
        background: #475569;
      }
    </style>
  </head>
  <body
    class="bg-slate-50 text-slate-800 dark:bg-slate-950 dark:text-slate-100"
  >
    <!-- 1. 3D BACKGROUND CONTAINER -->
    <div id="canvas-container"></div>

    <!-- UI LAYER -->
    <div class="ui-container">
      <!-- Navigation -->
      <nav
        class="fixed top-0 w-full p-6 flex justify-between items-center z-50 border-b border-slate-200/60 bg-white/70 dark:border-slate-700/30 dark:bg-slate-900/70 backdrop-blur-md transition-colors duration-300"
      >
        <div class="flex items-center gap-3 cursor-pointer group">
          <div class="relative">
            <div
              class="absolute inset-0 bg-blue-400 blur rounded-full opacity-10 group-hover:opacity-30 transition-opacity"
            ></div>
            <i
              data-lucide="network"
              class="relative w-6 h-6 text-blue-600 dark:text-blue-400"
            ></i>
          </div>
          <div
            class="logo-font text-xl font-medium text-slate-800 dark:text-slate-100"
          >
            <span class="font-bold text-blue-600 dark:text-blue-400">Graph</span
            >EDU
          </div>
        </div>

        <div class="flex items-center gap-6">
          <div
            class="hidden md:flex gap-8 text-sm text-slate-500 dark:text-slate-400 font-medium"
          >
            <a
              href="#"
              class="hover:text-blue-600 dark:hover:text-blue-400 hover:scale-105 transition-all"
              >Visual Learning</a
            >
            <a
              href="#"
              class="hover:text-blue-600 dark:hover:text-blue-400 hover:scale-105 transition-all"
              >Graph Explorer</a
            >
            <a
              href="#"
              class="hover:text-blue-600 dark:hover:text-blue-400 hover:scale-105 transition-all"
              >Pricing</a
            >
          </div>

          <button class="theme-btn" id="theme-toggle" onclick="toggleTheme()">
            ☀ Light
          </button>

          <a
            href="#"
            class="hidden md:block px-5 py-2 rounded-full border border-slate-200 dark:border-slate-700 text-sm font-medium text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-slate-900 dark:hover:text-white transition-colors"
          >
            Contact Sales
          </a>
        </div>
      </nav>

      <!-- 3. 3D HOLOGRAPHIC CARD TILT -->
      <div
        id="login-card"
        class="glass-card w-full max-w-[440px] p-10 rounded-3xl relative"
      >
        <!-- Decorative top gradient line -->
        <div
          class="absolute top-0 left-1/2 -translate-x-1/2 w-1/3 h-1 bg-gradient-to-r from-transparent via-blue-500 to-transparent rounded-b-full opacity-70"
        ></div>

        <div
          class="text-center mb-8 transform transition-transform translate-z-10"
        >
          <div
            class="inline-flex items-center justify-center w-16 h-16 rounded-full bg-blue-50 dark:bg-blue-900/30 mb-4 ring-1 ring-blue-100 dark:ring-blue-800 shadow-sm"
          >
            <i
              data-lucide="brain-circuit"
              class="w-8 h-8 text-blue-600 dark:text-blue-400"
            ></i>
          </div>
          <h1
            class="text-3xl font-bold mb-2 text-slate-800 dark:text-white logo-font tracking-tight"
          >
            Student Portal
          </h1>
          <p class="text-slate-500 dark:text-slate-400 text-sm">
            Enter the Knowledge Graph
          </p>
        </div>

        <form
          action="#"
          onsubmit="event.preventDefault(); window.location.href='home.html';"
          class="space-y-6"
        >
          <div class="input-group">
            <input
              type="text"
              id="username"
              name="username"
              class="input-field"
              placeholder=" "
              required
            />
            <label for="username" class="input-label">Graph ID / Email</label>
          </div>

          <div class="input-group">
            <input
              type="password"
              id="password"
              name="password"
              class="input-field"
              placeholder=" "
              required
            />
            <label for="password" class="input-label">Password</label>
          </div>

          <div class="flex items-center justify-between text-sm">
            <label
              class="flex items-center gap-2 cursor-pointer text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-slate-200 transition-colors"
            >
              <input
                type="checkbox"
                class="rounded bg-slate-100 dark:bg-slate-800 border-slate-300 dark:border-slate-600 text-blue-600 focus:ring-blue-500"
              />
              Remember node
            </label>
            <a
              href="#"
              class="text-blue-600 dark:text-blue-400 hover:text-blue-700 dark:hover:text-blue-300 font-medium transition-colors"
              >Lost access?</a
            >
          </div>

          <button
            type="submit"
            class="w-full bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-700 hover:to-blue-600 text-white py-3.5 rounded-xl font-bold shadow-lg shadow-blue-500/20 transition-all transform hover:scale-[1.02] active:scale-[0.98] relative overflow-hidden group"
          >
            <span class="relative z-10">Initialize Session</span>
            <!-- Button Shine Effect -->
            <div
              class="absolute inset-0 -translate-x-full group-hover:translate-x-full transition-transform duration-700 bg-gradient-to-r from-transparent via-white/20 to-transparent skew-x-12"
            ></div>
          </button>
        </form>

        <div class="mt-8 text-center">
          <p class="text-slate-500 dark:text-slate-400 text-sm">
            Don't have a node yet?
            <a
              href="#"
              class="text-blue-600 dark:text-blue-400 font-medium hover:underline hover:text-blue-700 dark:hover:text-blue-300"
              >Join the Network</a
            >
          </p>
        </div>
      </div>
    </div>

    <script>
      // --- THEME MANAGEMENT ---
      function initTheme() {
        const prefersDark =
          window.matchMedia &&
          window.matchMedia("(prefers-color-scheme: dark)").matches;
        const btn = document.getElementById("theme-toggle");

        if (prefersDark) {
          document.documentElement.classList.add("dark");
          if (btn) btn.textContent = "☀ Light";
        } else {
          document.documentElement.classList.remove("dark");
          if (btn) btn.textContent = "☾ Dark";
        }
      }

      function toggleTheme() {
        document.documentElement.classList.toggle("dark");
        const isDark = document.documentElement.classList.contains("dark");
        const btn = document.getElementById("theme-toggle");

        btn.textContent = isDark ? "☀ Light" : "☾ Dark";

        updateThreeTheme(isDark);
      }

      initTheme();

      // Initialize Lucide Icons
      lucide.createIcons();

      // --- THREE.JS SETUP ---
      const container = document.getElementById("canvas-container");

      const scene = new THREE.Scene();

      // Theme Colors
      const COLOR_BG_LIGHT = 0xf8fafc; // Slate-50
      const COLOR_BG_DARK = 0x020617; // Slate-950

      const isDarkInit = document.documentElement.classList.contains("dark");
      const initialBg = isDarkInit ? COLOR_BG_DARK : COLOR_BG_LIGHT;

      scene.fog = new THREE.FogExp2(initialBg, 0.002);
      scene.background = new THREE.Color(initialBg);

      const camera = new THREE.PerspectiveCamera(
        75,
        window.innerWidth / window.innerHeight,
        0.1,
        1000
      );
      camera.position.z = 30;

      const renderer = new THREE.WebGLRenderer({
        antialias: true,
        alpha: false,
      });
      renderer.setSize(window.innerWidth, window.innerHeight);
      renderer.setPixelRatio(window.devicePixelRatio);
      container.appendChild(renderer.domElement);

      // --- PARTICLE SYSTEM (MULTI-COLOR) ---
      const particleGeometry = new THREE.BufferGeometry();
      const particleCount = 300;

      const posArray = new Float32Array(particleCount * 3);
      const scaleArray = new Float32Array(particleCount);
      const colorArray = new Float32Array(particleCount * 3);

      for (let i = 0; i < particleCount; i++) {
        // Random positions
        posArray[i * 3] = (Math.random() - 0.5) * 60;
        posArray[i * 3 + 1] = (Math.random() - 0.5) * 60;
        posArray[i * 3 + 2] = (Math.random() - 0.5) * 60;

        // Random scale
        scaleArray[i] = Math.random();

        // Choose red, green or blue
        const c = Math.floor(Math.random() * 3);
        if (c === 0) {
          // RED
          colorArray[i * 3] = 1;
          colorArray[i * 3 + 1] = 0;
          colorArray[i * 3 + 2] = 0;
        } else if (c === 1) {
          // GREEN
          colorArray[i * 3] = 0;
          colorArray[i * 3 + 1] = 1;
          colorArray[i * 3 + 2] = 0;
        } else {
          // BLUE
          colorArray[i * 3] = 0;
          colorArray[i * 3 + 1] = 0;
          colorArray[i * 3 + 2] = 1;
        }
      }

      particleGeometry.setAttribute(
        "position",
        new THREE.BufferAttribute(posArray, 3)
      );
      particleGeometry.setAttribute(
        "scale",
        new THREE.BufferAttribute(scaleArray, 1)
      );
      particleGeometry.setAttribute(
        "color",
        new THREE.BufferAttribute(colorArray, 3)
      );

      const particleMaterial = new THREE.PointsMaterial({
        size: 0.4,
        transparent: true,
        opacity: 0.8,
        vertexColors: true,
      });

      const particlesMesh = new THREE.Points(
        particleGeometry,
        particleMaterial
      );
      scene.add(particlesMesh);

      // --- CONNECTION LINES ---
      const lineMaterial = new THREE.LineBasicMaterial({
        color: 0x94a3b8,
        transparent: true,
        opacity: 0.25,
      });

      const linesGeometry = new THREE.BufferGeometry();
      const linesMesh = new THREE.LineSegments(linesGeometry, lineMaterial);
      scene.add(linesMesh);

      // --- THEME UPDATE FUNCTION ---
      function updateThreeTheme(isDark) {
        const targetColor = isDark ? COLOR_BG_DARK : COLOR_BG_LIGHT;

        // Update Background
        if (scene.background) scene.background.setHex(targetColor);

        // Update Fog
        if (scene.fog) scene.fog.color.setHex(targetColor);

        // Optional: Update line color for better visibility
        if (linesMesh.material) {
          linesMesh.material.color.setHex(isDark ? 0x475569 : 0x94a3b8);
        }
      }

      // --- INTERACTIVITY ---
      let mouseX = 0,
        mouseY = 0,
        targetX = 0,
        targetY = 0;
      const windowHalfX = window.innerWidth / 2;
      const windowHalfY = window.innerHeight / 2;

      document.addEventListener("mousemove", onDocumentMouseMove);
      window.addEventListener("resize", onWindowResize);

      function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
      }

      function onDocumentMouseMove(event) {
        mouseX = event.clientX - windowHalfX;
        mouseY = event.clientY - windowHalfY;

        handleCardTilt(event.clientX, event.clientY);
      }

      // --- ANIMATION LOOP ---
      const clock = new THREE.Clock();

      function animate() {
        requestAnimationFrame(animate);
        const elapsedTime = clock.getElapsedTime();

        particlesMesh.rotation.y += 0.001;
        particlesMesh.rotation.x += 0.0005;
        linesMesh.rotation.y += 0.001;
        linesMesh.rotation.x += 0.0005;

        targetX = mouseX * 0.001;
        targetY = mouseY * 0.001;

        particlesMesh.rotation.y += 0.05 * (targetX - particlesMesh.rotation.y);
        particlesMesh.rotation.x += 0.05 * (targetY - particlesMesh.rotation.x);

        updateLines();

        // Pulse effect
        const sizes = particleGeometry.attributes.scale.array;
        for (let i = 0; i < particleCount; i++) {
          sizes[i] = 0.8 + 0.5 * Math.sin(elapsedTime * 2 + i);
        }
        particleGeometry.attributes.scale.needsUpdate = true;

        renderer.render(scene, camera);
      }

      function updateLines() {
        const positions = particlesMesh.geometry.attributes.position.array;
        const linePositions = [];
        const connectDistance = 9;

        for (let i = 0; i < particleCount; i++) {
          const x1 = positions[i * 3];
          const y1 = positions[i * 3 + 1];
          const z1 = positions[i * 3 + 2];

          for (let j = i + 1; j < particleCount; j++) {
            const x2 = positions[j * 3];
            const y2 = positions[j * 3 + 1];
            const z2 = positions[j * 3 + 2];

            const dist = Math.sqrt(
              (x1 - x2) ** 2 + (y1 - y2) ** 2 + (z1 - z2) ** 2
            );

            if (dist < connectDistance) {
              linePositions.push(x1, y1, z1, x2, y2, z2);
            }
          }
        }

        linesMesh.geometry.setAttribute(
          "position",
          new THREE.Float32BufferAttribute(linePositions, 3)
        );
      }

      // --- CARD TILT ---
      const card = document.getElementById("login-card");

      function handleCardTilt(x, y) {
        const width = window.innerWidth;
        const height = window.innerHeight;

        const xRotation = ((y - height / 2) / height) * 20;
        const yRotation = ((x - width / 2) / width) * 20;

        card.style.transform = `
      perspective(1000px)
      scale(1.02)
      rotateX(${-xRotation}deg)
      rotateY(${yRotation}deg)
    `;
      }

      document.addEventListener("mouseleave", () => {
        card.style.transform =
          "perspective(1000px) scale(1) rotateX(0) rotateY(0)";
      });

      animate();

      const inputs = document.querySelectorAll("input");
      inputs.forEach((input) => {
        input.addEventListener("blur", () => {
          if (input.value) input.classList.add("has-content");
          else input.classList.remove("has-content");
        });
      });
    </script>
  </body>
</html>
